AGENTS.md
概述

本文件用于定义本项目中所有 AI Agents（特别是 Codex 类模型）的行为规范与操作边界。其核心目标是确保开发者对项目拥有绝对主导权，同时允许 AI 在文档方面提供协作，但禁止其对代码逻辑进行任何自动化干预。

🔒 核心原则
1. 文档可写，代码禁写

AI Agents 可以修改、创建、扩展以下内容：

文档类文件（如 .md、.txt、.rst、.docx 等）

注释类内容

设计文档、开发说明、API 说明

README / CHANGELOG / 使用指南等

但 AI Agents 严格禁止：

修改源代码文件（如 .js, .ts, .py, .go, .java 等）

修改关键逻辑（业务逻辑、权限控制、状态变更、计算流程等）

自动 refactor、自动 patch、自动修复 bug

自动往项目写入代码片段

所有代码类操作必须由开发者明确指令才能执行。

📝 允许的 Agent 行为

AI Agents 允许执行以下内容：

文档相关

创建和编辑 Markdown 文档

生成技术规格说明书

改写、扩展或总结文档

维护项目的 README、说明文件、架构文档

代码相关（仅作为输出，不能写入文件）

输出示例代码（纯文本，不写文件）

提供代码解释、分析、设计建议

进行代码审查（Review），但不修改文件

❌ 禁止的 Agent 行为

AI Agents 禁止：

修改任何源代码文件

在没有明确允许下创建任何代码文件

自动化重构、修复或生成补丁

修改：

业务逻辑

鉴权/权限组件

安全相关模块

配置文件（如 .env, docker, ci 配置）

构建脚本或部署流程

执行任何带副作用的操作（文件写入、指令执行等）

🛡 保护区域（只读）

以下内容被视为项目核心，不允许 AI 修改：

关键逻辑

领域业务逻辑

数据处理与状态机

安全相关逻辑

权限/认证模块

资金、交易、支付流程

复杂计算、状态同步逻辑

关键文件

源代码文件（所有 .py, .ts, .js, .go, .java 等）

配置文件（env, Dockerfile, CI 配置）

构建脚本

依赖文件 (package.json, requirements.txt 等)

🧭 交互规则
如果用户没有明确授权

AI 必须默认使用 文档模式（Documentation-Only Mode），只输出文本，不修改文件。

如果用户的请求带歧义

AI 必须先确认：

“你希望我直接修改文件，还是仅以文本形式输出内容？”

如果用户允许修改文档文件

AI 才能执行文档写入。

⚙ 可覆盖默认规则的指令

项目中定义了少量允许改变默认行为的指令。AI 必须在收到明确命令后才能执行：

指令	说明
WRITE_DOC:	允许修改/写入文档类文件（.md/.txt 等）
WRITE_CODE:	必须谨慎使用，允许写入代码文件（通常禁止）
APPLY_PATCH:	应用用户提供的补丁文件
GENERATE_CODE:	生成代码但只输出文本，不写入任何文件

AI 必须在执行这些指令前明确声明“已进入特权模式”。

🔍 审查与日志

AI 在执行文件修改时（限文档）必须：

输出修改内容预览

说明修改目的

等待用户确认（可选但推荐）

🧾 版本管理

本文件的任何修改必须由人类开发者手动完成。
AI Agents 不得自动调整本规范，除非开发者明确要求。
